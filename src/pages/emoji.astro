---
import Layout from '../layouts/Layout.astro';
---
<Layout title="Emoji-Code" emoji="ğŸ˜">
  <section class="section text-center max-w-3xl mx-auto px-6 pb-12">
    <div class="text-6xl mb-6 animate-fade-in">ğŸ˜</div>
    <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-4">
      <span class="gradient-text-warm">Emoji-Code</span>
    </h1>
    <p class="text-lg text-gray-500 max-w-xl mx-auto">
      Erstelle deine eigene Geheimsprache mit Emojis. Nur wer den SchlÃ¼ssel kennt, kann deine Nachrichten lesen.
    </p>
  </section>

  <!-- Key display -->
  <section class="max-w-4xl mx-auto px-6 mb-16">
    <div class="card">
      <h2 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-6 text-center">Aktueller SchlÃ¼ssel</h2>
      <div class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-9 lg:grid-cols-13 gap-2" id="emoji-key"></div>
    </div>
  </section>

  <!-- Tool -->
  <section class="bg-pastel-gray py-16">
    <div class="max-w-3xl mx-auto px-6">
      <h2 class="text-2xl md:text-3xl font-bold text-center mb-10">Emoji-Ãœbersetzer</h2>
      <div class="bg-white rounded-3xl p-8 shadow-soft">
        <!-- Emoji set selection -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-gray-700 mb-3">Emoji-Set</label>
          <div class="flex flex-wrap gap-2">
            <button class="emoji-set-btn btn btn-orange text-sm !px-5 !py-2.5 !min-h-0" data-set="animals">ğŸ± Tiere</button>
            <button class="emoji-set-btn btn btn-pink text-sm !px-5 !py-2.5 !min-h-0" data-set="food">ğŸ• Essen</button>
            <button class="emoji-set-btn btn btn-blue text-sm !px-5 !py-2.5 !min-h-0" data-set="space">ğŸš€ Weltraum</button>
            <button class="emoji-set-btn btn btn-green text-sm !px-5 !py-2.5 !min-h-0" data-set="nature">ğŸŒ¸ Natur</button>
            <button class="emoji-set-btn btn btn-indigo text-sm !px-5 !py-2.5 !min-h-0" data-set="faces">ğŸ˜€ Gesichter</button>
          </div>
        </div>

        <div class="mb-6">
          <label class="block text-sm font-semibold text-gray-700 mb-2">Deine Nachricht</label>
          <input type="text" id="emoji-input" placeholder="Schreibe hier..." class="tool-input" maxlength="50" />
        </div>

        <div class="flex gap-3 mb-8 flex-wrap">
          <button id="btn-to-emoji" class="btn btn-orange">In Emojis</button>
          <button id="btn-from-emoji" class="btn btn-indigo">EntschlÃ¼sseln</button>
          <button id="btn-shuffle" class="btn btn-purple">ğŸ”€ Mischen</button>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-400 mb-2">Ergebnis</label>
          <div id="emoji-output" class="tool-output text-3xl text-center tracking-wider">â€¦</div>
        </div>

        <button id="btn-copy" class="btn-outline border-gray-200 text-gray-500 hover:bg-gray-50 mt-4 text-sm !px-5 !py-2.5 !min-h-0">
          ğŸ“‹ Kopieren
        </button>
      </div>
    </div>
  </section>

  <!-- Tips -->
  <section class="section max-w-3xl mx-auto px-6">
    <div class="card">
      <h2 class="text-2xl font-bold mb-6">Tipps fÃ¼r Profis</h2>
      <div class="space-y-3 text-gray-500">
        <p>ğŸ“± Schicke Emoji-Nachrichten Ã¼ber WhatsApp â€” niemand weiÃŸ, was sie bedeuten.</p>
        <p>ğŸ“ Schreibe den SchlÃ¼ssel auf und gib ihn nur deinen besten Freunden.</p>
        <p>ğŸ”„ Wechsle den SchlÃ¼ssel regelmÃ¤ÃŸig fÃ¼r extra Sicherheit.</p>
        <p>ğŸ”€ Nutze â€Mischen" fÃ¼r einen einzigartigen, zufÃ¤lligen SchlÃ¼ssel.</p>
      </div>
    </div>
  </section>

  <script>
    const ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const emojiSets: Record<string, string[]> = {
      animals: ['ğŸ±','ğŸ¶','ğŸ­','ğŸ¹','ğŸ°','ğŸ¦Š','ğŸ»','ğŸ¼','ğŸ¨','ğŸ¯','ğŸ¦','ğŸ®','ğŸ·','ğŸ¸','ğŸµ','ğŸ”','ğŸ§','ğŸ¦','ğŸ¤','ğŸ¦‹','ğŸŒ','ğŸ›','ğŸ','ğŸ','ğŸ¦„','ğŸ¢'],
      food: ['ğŸ','ğŸ','ğŸŠ','ğŸ‹','ğŸŒ','ğŸ‰','ğŸ‡','ğŸ“','ğŸ«','ğŸ’','ğŸ¥','ğŸ•','ğŸŒ®','ğŸ”','ğŸŒ­','ğŸ©','ğŸ§','ğŸª','ğŸ«','ğŸ¿','ğŸ¥¨','ğŸ¥•','ğŸŒ½','ğŸ„','ğŸ¥‘','ğŸ°'],
      space: ['ğŸš€','ğŸŒ','ğŸŒ™','â­','ğŸŒŸ','ğŸ’«','â˜„ï¸','ğŸª','ğŸŒ','ğŸŒ›','ğŸŒ ','ğŸ”­','ğŸ‘½','ğŸ›¸','ğŸŒŒ','âœ¨','ğŸŒˆ','âš¡','ğŸ”¥','ğŸ’','ğŸ†','ğŸŒŠ','â„ï¸','ğŸŒªï¸','â˜€ï¸','ğŸŒ‘'],
      nature: ['ğŸŒ¸','ğŸŒº','ğŸŒ»','ğŸŒ¹','ğŸŒ·','ğŸŒ¼','ğŸ€','ğŸŒ¿','ğŸƒ','ğŸŒ´','ğŸŒµ','ğŸ','ğŸ‚','ğŸŒ¾','ğŸ‹','ğŸ','ğŸª»','ğŸª·','ğŸŒ±','ğŸª´','ğŸ„','ğŸŒ²','ğŸŒ³','ğŸª¨','ğŸ’','ğŸŒ'],
      faces: ['ğŸ˜€','ğŸ˜ƒ','ğŸ˜„','ğŸ˜','ğŸ˜†','ğŸ˜…','ğŸ¤£','ğŸ˜‚','ğŸ™‚','ğŸ˜‰','ğŸ˜Š','ğŸ˜‡','ğŸ¥°','ğŸ˜','ğŸ¤©','ğŸ˜˜','ğŸ˜‹','ğŸ˜›','ğŸ¤”','ğŸ¤—','ğŸ¤«','ğŸ˜','ğŸ¥³','ğŸ˜','ğŸ˜Œ','ğŸ¤“'],
    };

    let currentEmojis = [...emojiSets.animals];

    function updateKeyDisplay() {
      const html = ALPHA.split('').map((l, i) =>
        `<div class="bg-pastel-orange rounded-xl p-2.5 text-center">
          <div class="text-sm font-bold text-gray-800">${l}</div>
          <div class="text-xl">${currentEmojis[i]}</div>
        </div>`
      ).join('');
      document.getElementById('emoji-key')!.innerHTML = html;
    }

    document.querySelectorAll('.emoji-set-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        currentEmojis = [...emojiSets[(btn as HTMLElement).dataset.set!]];
        updateKeyDisplay();
      });
    });

    document.getElementById('btn-shuffle')!.addEventListener('click', () => {
      for (let i = currentEmojis.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [currentEmojis[i], currentEmojis[j]] = [currentEmojis[j], currentEmojis[i]];
      }
      updateKeyDisplay();
    });

    document.getElementById('btn-to-emoji')!.addEventListener('click', () => {
      const text = (document.getElementById('emoji-input') as HTMLInputElement).value.toUpperCase();
      const result = text.split('').map(c => {
        if (c === ' ') return '  ';
        const i = ALPHA.indexOf(c);
        return i >= 0 ? currentEmojis[i] : c;
      }).join('');
      document.getElementById('emoji-output')!.textContent = result || 'â€¦';
    });

    document.getElementById('btn-from-emoji')!.addEventListener('click', () => {
      const text = (document.getElementById('emoji-input') as HTMLInputElement).value;
      const result = [...text].map(c => {
        if (c === ' ') return ' ';
        const i = currentEmojis.indexOf(c);
        return i >= 0 ? ALPHA[i] : c;
      }).join('');
      document.getElementById('emoji-output')!.textContent = result || 'â€¦';
    });

    document.getElementById('btn-copy')!.addEventListener('click', () => {
      const text = document.getElementById('emoji-output')!.textContent || '';
      navigator.clipboard.writeText(text);
      const btn = document.getElementById('btn-copy')!;
      btn.textContent = 'âœ… Kopiert!';
      setTimeout(() => btn.textContent = 'ğŸ“‹ Kopieren', 2000);
    });

    updateKeyDisplay();
  </script>
</Layout>
