---
import Layout from '../layouts/Layout.astro';
---
<Layout title="Emoji-Code" emoji="ğŸ˜">
  <div class="text-center mb-8">
    <div class="text-7xl mb-4">ğŸ˜</div>
    <h1 class="text-5xl font-fun font-bold rainbow-text">Emoji-Code</h1>
    <p class="text-xl text-gray-600 mt-4 max-w-2xl mx-auto">
      Erstelle deine eigene Geheimsprache mit Emojis! Nur wer den SchlÃ¼ssel kennt,
      kann deine Nachrichten lesen! ğŸ¤«âœ¨
    </p>
  </div>

  <!-- How it works -->
  <div class="bg-white rounded-3xl p-8 shadow-xl mb-8">
    <h2 class="text-3xl font-fun font-bold text-candy-yellow mb-4">ğŸ“– So funktioniert's</h2>
    <p class="text-lg mb-4">Jeder Buchstabe bekommt ein Emoji zugewiesen. Hier ist ein Beispiel-SchlÃ¼ssel:</p>
    <div class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-9 lg:grid-cols-13 gap-2" id="emoji-key"></div>
  </div>

  <!-- Interactive Tool -->
  <div class="bg-gradient-to-br from-candy-yellow/20 to-amber-200/30 rounded-3xl p-8 shadow-xl mb-8">
    <h2 class="text-3xl font-fun font-bold text-candy-yellow mb-6">ğŸ”§ Emoji-Ãœbersetzer</h2>

    <div class="mb-4">
      <label class="block text-lg font-bold mb-2">ğŸ¨ Emoji-Set wÃ¤hlen:</label>
      <div class="flex flex-wrap gap-3">
        <button class="emoji-set-btn btn-fun bg-gradient-to-r from-candy-yellow to-amber-400 text-sm" data-set="animals">ğŸ± Tiere</button>
        <button class="emoji-set-btn btn-fun bg-gradient-to-r from-candy-pink to-rose-400 text-sm" data-set="food">ğŸ• Essen</button>
        <button class="emoji-set-btn btn-fun bg-gradient-to-r from-candy-blue to-cyan-400 text-sm" data-set="space">ğŸš€ Weltraum</button>
        <button class="emoji-set-btn btn-fun bg-gradient-to-r from-candy-green to-emerald-400 text-sm" data-set="nature">ğŸŒ¸ Natur</button>
        <button class="emoji-set-btn btn-fun bg-gradient-to-r from-candy-purple to-violet-400 text-sm" data-set="faces">ğŸ˜€ Gesichter</button>
      </div>
    </div>

    <div class="mb-6">
      <label class="block text-lg font-bold mb-2">ğŸ“ Deine Nachricht:</label>
      <input type="text" id="emoji-input" placeholder="Schreibe hier..." class="tool-input" maxlength="50" />
    </div>

    <div class="flex gap-4 mb-6 flex-wrap">
      <button id="btn-to-emoji" class="btn-fun bg-gradient-to-r from-candy-yellow to-amber-400">
        ğŸ˜ In Emojis umwandeln
      </button>
      <button id="btn-from-emoji" class="btn-fun bg-gradient-to-r from-candy-purple to-candy-pink">
        ğŸ“ Emojis entschlÃ¼sseln
      </button>
    </div>

    <div>
      <label class="block text-lg font-bold mb-2">âœ¨ Ergebnis:</label>
      <div id="emoji-output" class="tool-output text-3xl text-center tracking-wider">
        Hier erscheint dein Emoji-Code...
      </div>
    </div>

    <button id="btn-copy" class="btn-fun bg-gradient-to-r from-gray-400 to-gray-500 mt-4 text-sm">
      ğŸ“‹ Kopieren
    </button>
  </div>

  <!-- Create your own -->
  <div class="bg-gradient-to-r from-candy-purple/20 to-candy-pink/20 rounded-3xl p-8 shadow-xl mb-8">
    <h2 class="text-3xl font-fun font-bold text-candy-purple mb-4">ğŸ¨ Eigenen SchlÃ¼ssel erstellen</h2>
    <p class="text-lg mb-4">Klicke auf "Mischen" fÃ¼r einen zufÃ¤lligen SchlÃ¼ssel!</p>
    <button id="btn-shuffle" class="btn-fun bg-gradient-to-r from-candy-purple to-candy-pink mb-4">
      ğŸ”€ Mischen!
    </button>
    <div id="custom-key" class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-9 lg:grid-cols-13 gap-2"></div>
  </div>

  <!-- Tips -->
  <div class="bg-gradient-to-r from-candy-green/20 to-candy-blue/20 rounded-3xl p-8 shadow-xl">
    <h2 class="text-3xl font-fun font-bold text-candy-green mb-4">ğŸ’¡ Tipps fÃ¼r Profis</h2>
    <div class="space-y-3 text-lg">
      <p>ğŸ“± Schicke Emoji-Nachrichten Ã¼ber WhatsApp â€” niemand weiÃŸ, was sie bedeuten!</p>
      <p>ğŸ“ Schreibe den SchlÃ¼ssel auf und gib ihn nur deinen besten Freunden!</p>
      <p>ğŸ”„ Wechsle den SchlÃ¼ssel regelmÃ¤ÃŸig fÃ¼r extra Sicherheit!</p>
      <p>ğŸ¤¹ Mische verschiedene Emoji-Sets fÃ¼r einen einzigartigen Code!</p>
    </div>
  </div>

  <script>
    const ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const emojiSets: Record<string, string[]> = {
      animals: ['ğŸ±','ğŸ¶','ğŸ­','ğŸ¹','ğŸ°','ğŸ¦Š','ğŸ»','ğŸ¼','ğŸ¨','ğŸ¯','ğŸ¦','ğŸ®','ğŸ·','ğŸ¸','ğŸµ','ğŸ”','ğŸ§','ğŸ¦','ğŸ¤','ğŸ¦‹','ğŸŒ','ğŸ›','ğŸ','ğŸ','ğŸ¦„','ğŸ¢'],
      food: ['ğŸ','ğŸ','ğŸŠ','ğŸ‹','ğŸŒ','ğŸ‰','ğŸ‡','ğŸ“','ğŸ«','ğŸ’','ğŸ¥','ğŸ•','ğŸŒ®','ğŸ”','ğŸŒ­','ğŸ©','ğŸ§','ğŸª','ğŸ«','ğŸ¿','ğŸ¥¨','ğŸ¥•','ğŸŒ½','ğŸ„','ğŸ¥‘','ğŸ°'],
      space: ['ğŸš€','ğŸŒ','ğŸŒ™','â­','ğŸŒŸ','ğŸ’«','â˜„ï¸','ğŸª','ğŸŒ','ğŸŒ›','ğŸŒ ','ğŸ”­','ğŸ‘½','ğŸ›¸','ğŸŒŒ','âœ¨','ğŸŒˆ','âš¡','ğŸ”¥','ğŸ’','ğŸ†','ğŸŒŠ','â„ï¸','ğŸŒªï¸','â˜€ï¸','ğŸŒ‘'],
      nature: ['ğŸŒ¸','ğŸŒº','ğŸŒ»','ğŸŒ¹','ğŸŒ·','ğŸŒ¼','ğŸ€','ğŸŒ¿','ğŸƒ','ğŸŒ´','ğŸŒµ','ğŸ','ğŸ‚','ğŸŒ¾','ğŸ‹','ğŸ','ğŸª»','ğŸª·','ğŸŒ±','ğŸª´','ğŸ„','ğŸŒ²','ğŸŒ³','ğŸª¨','ğŸ’','ğŸŒ'],
      faces: ['ğŸ˜€','ğŸ˜ƒ','ğŸ˜„','ğŸ˜','ğŸ˜†','ğŸ˜…','ğŸ¤£','ğŸ˜‚','ğŸ™‚','ğŸ˜‰','ğŸ˜Š','ğŸ˜‡','ğŸ¥°','ğŸ˜','ğŸ¤©','ğŸ˜˜','ğŸ˜‹','ğŸ˜›','ğŸ¤”','ğŸ¤—','ğŸ¤«','ğŸ˜','ğŸ¥³','ğŸ˜','ğŸ˜Œ','ğŸ¤“'],
    };

    let currentSet = 'animals';
    let currentEmojis = [...emojiSets[currentSet]];

    function updateKeyDisplay() {
      const keyDiv = document.getElementById('emoji-key')!;
      keyDiv.innerHTML = ALPHA.split('').map((letter, i) =>
        `<div class="bg-candy-yellow/10 rounded-xl p-2 text-center">
          <div class="text-xl font-bold">${letter}</div>
          <div class="text-2xl">${currentEmojis[i]}</div>
        </div>`
      ).join('');

      document.getElementById('custom-key')!.innerHTML = keyDiv.innerHTML;
    }

    // Set buttons
    document.querySelectorAll('.emoji-set-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        currentSet = (btn as HTMLElement).dataset.set!;
        currentEmojis = [...emojiSets[currentSet]];
        updateKeyDisplay();
      });
    });

    // Shuffle
    document.getElementById('btn-shuffle')!.addEventListener('click', () => {
      for (let i = currentEmojis.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [currentEmojis[i], currentEmojis[j]] = [currentEmojis[j], currentEmojis[i]];
      }
      updateKeyDisplay();
    });

    // Encode
    document.getElementById('btn-to-emoji')!.addEventListener('click', () => {
      const text = (document.getElementById('emoji-input') as HTMLInputElement).value.toUpperCase();
      const result = text.split('').map(c => {
        if (c === ' ') return '  ';
        const i = ALPHA.indexOf(c);
        return i >= 0 ? currentEmojis[i] : c;
      }).join('');
      document.getElementById('emoji-output')!.textContent = result || 'Schreibe erst etwas! â˜ï¸';
    });

    // Decode
    document.getElementById('btn-from-emoji')!.addEventListener('click', () => {
      const text = (document.getElementById('emoji-input') as HTMLInputElement).value;
      const result = [...text].map(c => {
        if (c === ' ') return ' ';
        const i = currentEmojis.indexOf(c);
        return i >= 0 ? ALPHA[i] : c;
      }).join('');
      document.getElementById('emoji-output')!.textContent = result || 'Gib Emojis ein! â˜ï¸';
    });

    // Copy
    document.getElementById('btn-copy')!.addEventListener('click', () => {
      const text = document.getElementById('emoji-output')!.textContent || '';
      navigator.clipboard.writeText(text);
      const btn = document.getElementById('btn-copy')!;
      btn.textContent = 'âœ… Kopiert!';
      setTimeout(() => btn.textContent = 'ğŸ“‹ Kopieren', 2000);
    });

    updateKeyDisplay();
  </script>
</Layout>
