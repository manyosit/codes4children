---
import CodeLayout from '../layouts/CodeLayout.astro';
import { getCodeBySlug } from '../data/codes';
const code = getCodeBySlug('spiegel')!;
const funFacts = [
  { icon: 'üßë‚Äçüé®', text: '<strong class="text-white">Leonardo da Vinci</strong> war Linksh√§nder und schrieb fast alle seine Notizen in Spiegelschrift ‚Äî √ºber 13.000 Seiten.' },
  { icon: 'ü§î', text: 'Forscher sind sich nicht einig, ob er seine Ideen <strong class="text-white">geheim halten</strong> wollte, oder ob es als Linksh√§nder einfach bequemer war.' },
];
---
<CodeLayout code={code} funFacts={funFacts}>
  <!-- How it works -->
  <section class="max-w-content mx-auto px-6 md:px-12 py-16">
    <div class="card-static max-w-3xl mx-auto p-8">
      <h2 class="font-display font-bold text-2xl mb-4">So funktioniert's</h2>
      <p class="text-text-secondary mb-6">Text wird r√ºckw√§rts geschrieben. Vor einem Spiegel wird er wieder lesbar.</p>
      <div class="rounded-xl p-6 text-center" style={`background: ${code.accentColorLight}`}>
        <p class="text-lg mb-1 text-text-secondary">Normal: <strong class="text-text-primary text-2xl">GEHEIM</strong></p>
        <p class="text-lg text-text-secondary">Gespiegelt: <strong class="text-2xl" style={`color: ${code.accentColor}; direction:rtl; unicode-bidi:bidi-override;`}>GEHEIM</strong></p>
      </div>
    </div>
  </section>

  <!-- Tool -->
  <section class="py-16" style={`background: ${code.accentColor}08`}>
    <div class="max-w-3xl mx-auto px-6 md:px-12">
      <h2 class="font-display font-bold text-2xl md:text-3xl text-center mb-10">Spiegel-Maschine</h2>
      <div class="card-static p-8">
        <div class="mb-6">
          <label class="block text-sm font-semibold text-text-primary mb-2">Dein Text</label>
          <input type="text" id="mirror-input" placeholder="Schreibe hier..." class="tool-input" maxlength="50" />
        </div>
        <button id="btn-mirror" class="btn mb-8" style={`background: ${code.accentColor}`}>Spiegeln</button>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <label class="block text-sm font-semibold text-text-secondary mb-2">R√ºckw√§rts</label>
            <div id="mirror-reversed" class="tool-output text-xl font-semibold text-center"
                 style={`background: ${code.accentColor}10; border-left: 4px solid ${code.accentColor}; color: ${code.accentColor}`}>‚Ä¶</div>
          </div>
          <div>
            <label class="block text-sm font-semibold text-text-secondary mb-2">Echte Spiegelschrift</label>
            <div id="mirror-flipped" class="tool-output text-xl font-semibold text-center"
                 style={`background: #8B5CF610; border-left: 4px solid #8B5CF6; color: #8B5CF6; transform: scaleX(-1)`}>‚Ä¶</div>
          </div>
        </div>
      </div>

      <!-- Live mirror -->
      <div class="card-static mt-6 p-8 text-center">
        <h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wider mb-4">Live-Spiegel</h3>
        <input type="text" id="live-input" placeholder="Tippe hier..." class="tool-input text-center text-2xl mb-6" maxlength="30" />
        <div id="live-mirror" class="text-4xl md:text-5xl font-bold py-6 rounded-xl"
             style={`color: ${code.accentColor}; background: ${code.accentColorLight}; transform: scaleX(-1)`}>‚Ä¶</div>
      </div>
    </div>
  </section>

  <script>
    document.getElementById('btn-mirror').addEventListener('click', () => {
      const text = document.getElementById('mirror-input').value;
      document.getElementById('mirror-reversed').textContent = text.split('').reverse().join('') || '‚Ä¶';
      document.getElementById('mirror-flipped').textContent = text || '‚Ä¶';
    });
    document.getElementById('live-input').addEventListener('input', (e) => {
      document.getElementById('live-mirror').textContent = e.target.value || '‚Ä¶';
    });
  </script>
</CodeLayout>
