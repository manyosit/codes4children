---
import CodeLayout from '../layouts/CodeLayout.astro';
import { getCodeBySlug } from '../data/codes';
const code = getCodeBySlug('zahlen')!;
const funFacts = [
  { icon: 'ğŸ”¢', text: 'Der Zahlen-Code ist einer der <strong class="text-white">Ã¤ltesten Codes</strong> der Welt und wird heute noch in RÃ¤tseln und Schnitzeljagden verwendet.' },
  { icon: 'ğŸ§®', text: 'In der Informatik werden Buchstaben auch als Zahlen gespeichert â€” <strong class="text-white">ASCII</strong> nennt man dieses System.' },
];
---
<CodeLayout code={code} funFacts={funFacts}>
  <!-- Table -->
  <section class="max-w-content mx-auto px-6 md:px-12 py-16">
    <div class="card-static max-w-4xl mx-auto p-8">
      <h2 class="text-sm font-semibold text-text-secondary uppercase tracking-wider mb-6 text-center">Die Zuordnung</h2>
      <div class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-9 lg:grid-cols-13 gap-2">
        {Array.from({length: 26}, (_, i) => {
          const letter = String.fromCharCode(65 + i);
          return (
            <div class="rounded-xl p-2.5 text-center" style={`background: ${code.accentColorLight}`}>
              <div class="text-lg font-bold text-text-primary">{letter}</div>
              <div class="text-sm font-semibold" style={`color: ${code.accentColor}`}>{i + 1}</div>
            </div>
          );
        })}
      </div>
      <div class="rounded-xl p-5 text-center mt-6" style={`background: ${code.accentColorLight}`}>
        <p class="text-base">
          <span class="text-text-secondary">HALLO</span>
          <span class="mx-3 text-gray-300">â†’</span>
          <span class="font-bold text-xl font-mono" style={`color: ${code.accentColor}`}>8 Â· 1 Â· 12 Â· 12 Â· 15</span>
        </p>
      </div>
    </div>
  </section>

  <!-- Tool -->
  <section class="py-16" style={`background: ${code.accentColor}08`}>
    <div class="max-w-3xl mx-auto px-6 md:px-12">
      <h2 class="font-display font-bold text-2xl md:text-3xl text-center mb-10">Zahlen-Ãœbersetzer</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="card-static p-6">
          <h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wider mb-4">Text â†’ Zahlen</h3>
          <input type="text" id="text-input" placeholder="Schreibe hier..." class="tool-input mb-3" maxlength="50" />
          <button id="btn-to-numbers" class="btn w-full" style={`background: ${code.accentColor}`}>Umwandeln</button>
          <div id="number-output" class="tool-output mt-4 text-xl text-center"
               style={`background: ${code.accentColor}10; border-left: 4px solid ${code.accentColor}; color: ${code.accentColor}`}>â€¦</div>
        </div>
        <div class="card-static p-6">
          <h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wider mb-4">Zahlen â†’ Text</h3>
          <input type="text" id="number-input" placeholder="z.B. 8-1-12-12-15" class="tool-input mb-3" />
          <button id="btn-to-text" class="btn w-full bg-primary hover:bg-primary-dark">Umwandeln</button>
          <div id="text-output" class="tool-output mt-4 text-xl font-bold text-center"
               style="background: #6366F110; border-left: 4px solid #6366F1; color: #6366F1;">â€¦</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tricks -->
  <section class="max-w-content mx-auto px-6 md:px-12 py-16">
    <div class="max-w-3xl mx-auto">
      <h2 class="font-display font-bold text-2xl text-center mb-8">Tricks fÃ¼r Profis</h2>
      <div class="space-y-4">
        <div class="card-static p-6" style={`background: ${code.accentColorLight}`}>
          <p class="font-semibold text-text-primary mb-1">ğŸ”„ RÃ¼ckwÃ¤rts-Zahlen</p>
          <p class="text-sm text-text-secondary">A=26, B=25, C=24 â€¦ Z=1 â€” doppelt verwirrend!</p>
        </div>
        <div class="card-static p-6 bg-blue-50">
          <p class="font-semibold text-text-primary mb-1">â• Plus-Trick</p>
          <p class="text-sm text-text-secondary">Addiere eine geheime Zahl! Bei +5 wird A=6, B=7, C=8â€¦</p>
        </div>
        <div class="card-static p-6 bg-purple-50">
          <p class="font-semibold text-text-primary mb-1">âœ–ï¸ Mal-Trick</p>
          <p class="text-sm text-text-secondary">Multipliziere mit 2! A=2, B=4, C=6â€¦ Knifflig!</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Challenge -->
  <section class="py-16" style={`background: ${code.accentColor}08`}>
    <div class="max-w-3xl mx-auto px-6 md:px-12">
      <div class="card-static p-8 text-center">
        <h2 class="font-display font-bold text-2xl mb-4">ğŸ† Herausforderung</h2>
        <p class="text-text-secondary mb-6">Was bedeutet diese Zahlen-Nachricht?</p>
        <p class="text-2xl font-mono font-bold rounded-xl p-6"
           style={`color: ${code.accentColor}; background: ${code.accentColorLight}`}>
          4Â·21 / 2Â·9Â·19Â·20 / 19Â·21Â·16Â·5Â·18
        </p>
        <details class="mt-6">
          <summary class="cursor-pointer font-semibold hover:underline text-sm" style={`color: ${code.accentColor}`}>LÃ¶sung anzeigen</summary>
          <p class="mt-3 text-lg font-semibold">DU BIST SUPER! ğŸŒŸ</p>
        </details>
      </div>
    </div>
  </section>

  <script>
    const ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    document.getElementById('btn-to-numbers').addEventListener('click', () => {
      const text = document.getElementById('text-input').value.toUpperCase();
      const result = text.split('').map(c => {
        if (c === ' ') return '/';
        const i = ALPHA.indexOf(c);
        return i >= 0 ? String(i + 1) : c;
      }).join('Â·').replace(/Â·\/Â·/g, ' / ');
      document.getElementById('number-output').textContent = result || 'â€¦';
    });
    document.getElementById('btn-to-text').addEventListener('click', () => {
      const nums = document.getElementById('number-input').value;
      const parts = nums.split(/[\s\/]+/).map(word =>
        word.split(/[-Â·]/).map(n => {
          const num = parseInt(n);
          return num >= 1 && num <= 26 ? ALPHA[num - 1] : '?';
        }).join('')
      ).join(' ');
      document.getElementById('text-output').textContent = parts || 'â€¦';
    });
  </script>
</CodeLayout>
